<process xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2010/10/avosScreenflow.xsd" xmlns:types1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd" xmlns:aetgt="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd" xmlns:list="urn:activevos:spi:list:functions" name="proc-FRA-Lander-bmm-thread"><appliesTo/><description>batch manager - Thread Process, runs the mapping IF it should run and the type of mapping</description><tags>batman,jb,.agent:icopal_dev,.anonymous</tags><generator>Informatica Process Designer 8</generator><input><parameter name="fromSub_ProcessID" type="string"><options><option name="required">false</option></options></parameter><parameter name="fromSub_ProcessName" type="string"><options><option name="required">false</option></options></parameter><parameter name="fromSub_DataSourceKey" type="string"><options><option name="required">false</option></options></parameter><parameter name="fromSub_SubProcessName" type="string"><options><option name="required">false</option></options></parameter><parameter name="fromSub_MappingConfigTaskName" type="string"><options><option name="required">false</option></options></parameter><parameter name="fromSub_MappingConfigTaskDelta" type="string"><options><option name="required">false</option></options></parameter><parameter name="fromSub_MappingName" type="string"><options><option name="required">false</option></options></parameter></input><tempFields><field name="tmp_Instruction" type="string"><options><option name="required">false</option></options></field><field name="tmp_RunType" type="string"><options><option name="required">false</option></options></field></tempFields><notes/><deployment suspendOnFault="false" tracingLevel="verbose"><targetLocation>icopal_dev</targetLocation><rest><allowAnonymousAccess/></rest></deployment><flow id="a"><start id="b"><link id="j597rlgg" targetId="j597rlgf"/></start><assignment id="j597rlgf"><title>Hardcoding Only Here</title><operation source="formula" to="input.fromSub_DataSourceKey"><expression language="XQuery">if(fn:string-length($input.fromSub_DataSourceKey)=0) then 
(
'1001150000'
) else (
$input.fromSub_DataSourceKey
)</expression></operation><operation source="formula" to="input.fromSub_ProcessID"><expression language="XQuery">if(fn:string-length($input.fromSub_ProcessID)=0) then 
(
'66660'
) else (
$input.fromSub_ProcessID
)</expression></operation><operation source="formula" to="input.fromSub_ProcessName"><expression language="XQuery">if(fn:string-length($input.fromSub_ProcessName)=0) then 
(
'FRA-M3-TEST'
) else (
$input.fromSub_ProcessName
)</expression></operation><operation source="formula" to="input.fromSub_MappingConfigTaskName"><expression language="XQuery">if(fn:string-length($input.fromSub_MappingConfigTaskName)=0) then 
(
'TEST_m3_FRA_MIT [DSS]'
) else (
fn:concat($input.fromSub_MappingConfigTaskName,' [MTT]')
)</expression></operation><operation source="formula" to="input.fromSub_MappingConfigTaskDelta"><expression language="XQuery">if(fn:string-length($input.fromSub_MappingConfigTaskName)=0) then 
(
'TEST_m3_FRA_MIT [DSS]'
) else (
fn:concat($input.fromSub_MappingConfigTaskName,'-DELTA [MTT]')
)</expression></operation><operation source="formula" to="input.fromSub_SubProcessName"><expression language="XQuery">if(fn:string-length($input.fromSub_SubProcessName)=0) then 
(
'66660'
) else (
$input.fromSub_SubProcessName
)</expression></operation><operation source="formula" to="input.fromSub_MappingName"><expression language="XQuery">if(fn:string-length($input.fromSub_MappingName)=0) then 
(
'm_sourceToSQLDB_singleTable_prod'
) else (
$input.fromSub_MappingName
)</expression></operation><link id="j5snhyxe" targetId="j597rlf6"/></assignment><service id="j597rlf6"><title>Thread START</title><serviceName>Conn-WS-StoredProcs:mplt_StartRun_Operation</serviceName><serviceInput><parameter name="ProcessName" source="field" updatable="true">input.fromSub_ProcessName</parameter><parameter name="IcrtProcessId" source="field" updatable="true">input.fromSub_ProcessID</parameter><parameter name="SubProcessName" source="field" updatable="true">input.fromSub_SubProcessName</parameter><parameter name="MappingConfigTaskName" source="field" updatable="true">input.fromSub_MappingConfigTaskName</parameter><parameter name="MappingName" source="field" updatable="true">input.fromSub_MappingName</parameter></serviceInput><link id="j651lejp" targetId="j597rl7r"/></service><service id="j5ttpyib"><title>Thread STOP</title><serviceName>Conn-WS-StoredProcs:mplt_StopRun_Operation</serviceName><serviceInput><parameter name="ProcessName" source="field" updatable="true">input.fromSub_ProcessName</parameter><parameter name="IcrtProcessId" source="field" updatable="true">input.fromSub_ProcessID</parameter><parameter name="ProcessRunId" source="field" updatable="true">output.output_ProcessRunId</parameter><parameter name="SubProcessName" source="field" updatable="true">input.fromSub_SubProcessName</parameter><parameter name="SubProcessRunId" source="field" updatable="true">output.output_SubProcessRunId</parameter><parameter name="MappingConfigTaskName" source="field" updatable="true">input.fromSub_MappingConfigTaskName</parameter><parameter name="MappingName" source="field" updatable="true">input.fromSub_MappingName</parameter><parameter name="ThreadRunId" source="field" updatable="true">output.output_ThreadRunId</parameter><parameter name="SuccessSourceRows" source="field" updatable="true">output.Success Source Rows</parameter><parameter name="FailedSourceRows" source="field" updatable="true">output.Failed Source Rows</parameter><parameter name="SuccessTargetRows" source="field" updatable="true">output.Success Target Rows</parameter><parameter name="FailedTargetRows" source="field" updatable="true">output.Failed Target Rows</parameter></serviceInput><link id="j5ttpyid" targetId="d"/></service><container id="j597rl7r" type="exclusive"><title>Source Process Data OK</title><flow id="j597rl88"><assignment id="j597rl92"><title>Assign to Memory</title><operation source="field" to="temp.tmp_Instruction">output.output_Instruction</operation><operation source="field" to="temp.tmp_RunType">output.output_RunType</operation><link id="j59lf5mx" targetId="j597rla5"/></assignment><container id="j597rla5" type="exclusive"><title>Instruction != RUN, then SKIP</title><flow id="j597rla6"><container id="j597rla8" type="exclusive"><title>Path for RunType = FULL or DELTA </title><flow id="j597rla9"><service id="j597rlaa"><title>Run FULL par MCT</title><serviceName>ICSExecuteTask</serviceName><serviceInput><parameter name="Task Name" source="field" updatable="true">input.fromSub_MappingConfigTaskName</parameter><parameter name="Wait for Task to Complete" source="constant">true</parameter><parameter name="Max Wait" source="constant">86400</parameter></serviceInput></service><link id="j597rlam" targetId="j597rla8" type="containerLink"/></flow><flow id="j65pumw3"><service id="j65pumwc"><title>Run DELTA par MCT</title><serviceName>ICSExecuteTask</serviceName><serviceInput><parameter name="Task Name" source="field" updatable="true">input.fromSub_MappingConfigTaskDelta</parameter><parameter name="Wait for Task to Complete" source="constant">true</parameter><parameter name="Max Wait" source="constant">86400</parameter></serviceInput></service><link id="j65pumw4" targetId="j597rla8" type="containerLink"/></flow><flow id="j597rlab"><link id="j597rlan" targetId="j597rla8" type="containerLink"/></flow><link id="j597rlak" targetId="j597rla9" type="containerLink"><condition source="formula"><function name="contains"><arg name="left">{$temp.tmp_RunType}</arg><arg name="right">FULL</arg></function></condition></link><link id="j65pumw1" targetId="j65pumw3" type="containerLink"><condition source="formula"><function name="contains"><arg name="left">{$temp.tmp_RunType}</arg><arg name="right">DELTA</arg></function></condition></link><link id="j597rlal" targetId="j597rlab" type="containerLink"/></container><link id="j597rlai" targetId="j597rla5" type="containerLink"/></flow><flow id="j597rlad"><link id="j597rlao" targetId="j597rla5" type="containerLink"/></flow><link id="j597rlag" targetId="j597rla6" type="containerLink"><condition source="formula"><function name="starts-with"><arg name="left">{$temp.tmp_Instruction}</arg><arg name="right">R</arg></function></condition></link><link id="j597rlah" targetId="j597rlad" type="containerLink"/></container><link id="j597rl89" targetId="j597rl7r" type="containerLink"/></flow><flow id="j597rl8b"><link id="j597rl8c" targetId="j597rl7r" type="containerLink"/></flow><link id="j597rl85" targetId="j597rl88" type="containerLink"><condition source="formula"><function name="set"><arg name="field">{$output.output_ProcessRunId}</arg></function></condition></link><link id="j597rl86" targetId="j597rl8b" type="containerLink"/><link id="j66h8id6" targetId="j5ttpyib"/></container><end id="d"/></flow></process>